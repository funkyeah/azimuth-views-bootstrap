<template name="navigation">
  <div class="container navigation">
    <div class="row">
      <div class="col-md-12">
        <h2>Header Navigation<a class="btn btn-default btn-sm add-link"><i class="glyphicon glyphicon-plus"></i>&nbsp;Add link</a></h2>
      </div>
      <div class="col-md-6">
        <div class="header-dd dd" id="header_active">
          {{#if headerNav}}
            {{#with headerNav}}
              {{#isolate}}{{>navigation_root}}{{/isolate}}
            {{/with}}
          {{else}}
            <div class="dd-empty">Drag pages here to add them to header navigation.</div>
          {{/if}}
        </div>
      </div>
      <div class="col-md-6">
        <div class="header-dd dd" id="header_disabled">
          {{#if headerNavDisabled}}
            {{#with headerNavDisabled}}
              {{#isolate}}{{>navigation_root}}{{/isolate}}
            {{/with}}
          {{else}}
            <div class="dd-empty">Drag pages here to hide them from header navigation.</div>
          {{/if}}
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <h2>Footer Navigation<a class="btn btn-sm add-link"><i class="glyphicon glyphicon-plus"></i>&nbsp;Add link</a></h2>
      </div>
      <div class="col-md-6">
        <div class="footer-dd dd" id="footer_active">
          {{#if footerNav}}
            {{#with footerNav}}
              {{#isolate}}{{>navigation_root}}{{/isolate}}
            {{/with}}
          {{else}}
            <div class="dd-empty">Drag pages here to add them to footer navigation.</div>
          {{/if}}
        </div>
      </div>
      <div class="col-md-6">
        <div class="footer-dd dd" id="footer_disabled">
          {{#if footerNavDisabled}}
            {{#with footerNavDisabled}}
              {{#isolate}}{{>navigation_root}}{{/isolate}}
            {{/with}}
          {{else}}
            <div class="dd-empty">Drag pages here to hide them from footer navigation.</div>
          {{/if}}
        </div>
      </div>
    </div>
  </div>

  <div class="azimuth-modal modal-dialog" id="linkModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Edit Link</h3>
      </div>
      <div class="modal-body">
        <form class="create-user-form">
          <div class="form-group">
            <label>URL</label>
            <input type="text" class="form-control link-url" value=''>
          </div>

          <div class="form-group">
            <label>Title</label>
            <input type="text" class="form-control link-title" value=''>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn close pull-left">Cancel</button>
        <button class="edit-link-confirm btn btn-success pull-right">Save</button>
      </div>
    </div>
  </div>

  <div class="azimuth-modal modal-dialog" id="deleteLinkModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Delete Link</h3>
      </div>
      <div class="modal-body">
        <p>Are you sure you wish to delete this link?  This action can not be undone</p>
      </div>
      <div class="modal-footer">
        <button class="btn-warning close pull-left">Cancel</button>
        <button class="delete-link-confirm btn btn-danger pull-right">Delete</button>
      </div>
    </div>
  </div>
</template>

<template name="navigation_root">
  <ol class="dd-list">
    {{#each this}}
      {{#if children}}
        <li class="dd-item" data-url="{{url}}" data-title="{{title}}" data-id="{{id}}">
          <div class="dd-handle">{{title}}</div><div class="edit-link-container"><a href="#" class="edit-link"><i class='glyphicon glyphicon-edit'></i></a></div><div class="edit-link-container"><a href="#" class="delete-link"><i class='glyphicon glyphicon-remove'></i></a></div>
            {{>navigation_child}}
        </li>
      {{else}}
        <li class="dd-item" data-url="{{url}}" data-title="{{title}}" data-id="{{id}}">
          <div class="dd-handle">{{title}}</div><div class="edit-link-container"><a href="#" class="edit-link"><i class='glyphicon glyphicon-edit'></i></a></div><div class="edit-link-container"><a href="#" class="delete-link"><i class='glyphicon glyphicon-remove'></i></a></div>
        </li>
      {{/if}}
    {{/each}}
  </ol>
</template>

<template name="navigation_child">
  <ol class="dd-list">
    {{#each children}}
      {{#if children}}
        <li class="dd-item" data-url="{{url}}" data-title="{{title}}" data-id="{{id}}">
          <div class="dd-handle">{{title}}</div><div class="edit-link-container"><a href="#" class="edit-link"><i class='glyphicon glyphicon-edit'></i></a></div><div class="edit-link-container"><a href="#" class="delete-link"><i class='glyphicon glyphicon-remove'></i></a></div>
            {{>navigation_child}}
        </li>
      {{else}}
        <li class="dd-item" data-url="{{url}}" data-title="{{title}}" data-id="{{id}}">
          <div class="dd-handle">{{title}}</div><div class="edit-link-container"><a href="#" class="edit-link"><i class='glyphicon glyphicon-edit'></i></a></div><div class="edit-link-container"><a href="#" class="delete-link"><i class='glyphicon glyphicon-remove'></i></a></div>
        </li>
      {{/if}}
    {{/each}}
  </ol>
</template>